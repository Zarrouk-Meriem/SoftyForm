import { getImporters } from './config/icon-sets.js';
import { iconSetsStorage } from './data/icon-set/store/storage.js';
import { setImporters, updateIconSets } from './data/icon-sets.js';
import { cleanupStorageCache } from './data/storage/startup.js';
/**
 * Init API
 */
export async function initAPI(options = {}) {
    // Reset old cache
    if (options.cleanup !== false) {
        await cleanupStorageCache(iconSetsStorage);
    }
    // Get all importers and load data
    let importers = options.importers;
    if (!importers) {
        importers = await getImporters();
    }
    for (let i = 0; i < importers.length; i++) {
        await importers[i].init();
    }
    // Update
    setImporters(importers);
    updateIconSets();
}
